#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
case_status_by_neighborhood <- shootings_by_neighborhood %>%
group_by(neighborhood_dem,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = (unsolved/total_shootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
group_by(neighborhood_dem,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = (unsolved/total_shootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = (unsolved/total_shootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = (unsolved/total_shootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = (unsolved/total_shootings)*100)
cases_neighborhood
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(unsolved_cases = (unsolved/total_shootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(totalshootings= closed_by_arrest, closed_without_arrest, open_no_arrest) %>%
mutate(unsolved_cases = closed_without_arrest, open_no_arrest) %>%
mutate(pct_unsolvedcases= (unsolved_cases/totalshootings)*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
case_status_by_neighborhood <- shootings_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
case_status_by_neighborhood <- homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=majority_white_tracts) +
geom_sf(data=baltimore_homicides, color="red")
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=majority_white) +
geom_sf(data=baltimore_homicides, color="red")
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=majority_white) +
geom_sf(data=baltimore_homicides, color="red")
library(tidyverse)
library(janitor)
library(sf)
library(leaflet)
library(ggplot2)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=majority_white) +
geom_sf(data=baltimore_homicides, color="red")
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=baltimore_tract_shapefiles) +
geom_sf(data=baltimore_homicides)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=baltimore_shape_files) +
geom_sf(data=baltimore_homicides)
#classify different census tracts as majority white or not
majority_white <- baltimore_demographics %>%
mutate(pct_white = (white_pop/total_pop*100)) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > 50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
#joining spatial data with the majority_white neighborhoods classifications
majority_white_join <- majority_white %>%
inner_join(baltimore_shape_files) %>%
st_as_sf()
homicides_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_join) %>%
as_tibble()
#create a table that organizes values into columns to mutate a column. this can show us how many cases are solved in majority white neighborhoods and non-majority white neighborhoods
homicides_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
ggplot() +
geom_sf(data=baltimore_shape_files) +
geom_sf(data=baltimore_homicides, color = "red")
library(tidyverse)
library(janitor)
library(sf)
###
# Load dataframe of baltimore homicides
###
baltimore_homicides <- read_csv("https://raw.githubusercontent.com/washingtonpost/data-homicides/master/homicide-data.csv") %>%
filter(city == "Baltimore") %>%
st_as_sf(
coords = c("lon","lat"),
crs="NAD83"
)
write_rds(baltimore_homicides,"data/baltimore_homicides.rds")
###
# Load dataframe of Baltimore demographics
###
library(tidycensus)
census_api_key("549950d36c22ff16455fe196bbbd01d63cfbe6cf")
baltimore_tract_demographics <- get_acs(geography = "tract", state="Maryland", variables = c( "B01001_001","B02001_002"), year = 2017) %>%
clean_names() %>%
select(geoid, name, variable, estimate) %>%
pivot_wider(names_from=variable, values_from=estimate) %>%
rename(total_pop = B01001_001,
white_pop = B02001_002
) %>%
filter(str_detect(name,"Baltimore city"))
write_rds(baltimore_tract_demographics,"data/baltimore_tract_demographics.rds")
###
# Load Baltimore tract shapefiles
###
baltimore_tract_shapefiles <- get_acs(geography = "tract", state="Maryland", variables = c( "B01001_001"), year = 2017, geometry = TRUE) %>%
clean_names() %>%
select(geoid,name,geometry) %>%
filter(str_detect(name,"Baltimore city"))
write_rds(baltimore_tract_shapefiles,"data/baltimore_tract_shapefiles.rds")
baltimore_homicides <- read_rds("data/baltimore_homicides.rds")
baltimore_tract_demographics <- read_rds("data/baltimore_tract_demographics.rds")
baltimore_tract_shapefiles <- read_rds("data/baltimore_tract_shapefiles.rds")
###
# Classify each tract as majority white or not
###
majority_white_tracts <- baltimore_tract_demographics %>%
mutate(pct_white = white_pop/total_pop) %>%
select(geoid,name,pct_white) %>%
mutate(neighborhood_type = case_when(
pct_white > .50 ~ "majority_white",
TRUE ~ "not_majority_white"
))
###
# Connect classified neighborhood file to spatial data
###
majority_white_tracts <- majority_white_tracts %>%
inner_join(baltimore_tract_shapefiles) %>%
st_as_sf()
###
# Spatial join to assign each shooting to a tract
###
shootings_by_neighborhood <- baltimore_homicides %>%
st_join(majority_white_tracts) %>%
as_tibble()
###
# Calculate the percentage of unsolved homicides in white and non-white neighborhoods
###
case_status_by_neighborhood <- shootings_by_neighborhood %>%
group_by(neighborhood_type,disposition) %>%
count() %>%
pivot_wider(names_from=disposition, values_from=n) %>%
clean_names() %>%
mutate(total_shootings = closed_by_arrest+closed_without_arrest+open_no_arrest) %>%
mutate(unsolved = open_no_arrest + closed_without_arrest) %>%
mutate(pct_unsolved = unsolved/total_shootings*100)
case_status_by_neighborhood
###
# Output map
###
ggplot() +
geom_sf(data=baltimore_tract_shapefiles) +
geom_sf(data=baltimore_homicides)
